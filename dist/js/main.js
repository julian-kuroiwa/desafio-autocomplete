function hasClass(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function autocomplete(e){var t=[];for(var o in medicamentos)if(medicamentos.hasOwnProperty(o)){var c=medicamentos[o];if(e.search("\n")){var a=e.split("\n");e=a[a.length-1]}e===c.nome.toLowerCase().slice(0,e.length)&&t.push(c.nome)}return t}var medicamentos=[{fabricante:"Roche",nome:"Roacutan 20mg, Cápsula (30un)",precoMax:22.1,precoMin:20.99,principioAtivo:"Isotretinoína 20mg",titularidade:"Referência"},{fabricante:"Sundown Vitaminas",nome:"Vitamina C, comprimido (100un)",precoMax:45.15,precoMin:31.99,principioAtivo:"Ácido Ascórbico",titularidade:"Referência"},{fabricante:"Sundown Vitaminas",nome:"Vitamina C, comprimido (180un)",precoMax:10,precoMin:10,principioAtivo:"Ácido Ascórbico",titularidade:"Genérico"},{fabricante:"EMS Sigma Pharma",nome:"Itraspor 100mg, Cápsula (15un)",precoMax:209,precoMin:100,principioAtivo:"Itraconazol 100mg",titularidade:"Genérico"},{fabricante:"EMS Sigma Pharma",nome:"Itraspor 100mg, Cápsula (28un)",precoMax:15,precoMin:9.99,principioAtivo:"Itraconazol 100mg",titularidade:"Referência"},{fabricante:"Abbott",nome:"Cloridrato de sibutramina 15mg, Cápsula (30un)",precoMax:40,precoMin:40,principioAtivo:"Cloridrato de sibutramina 15mg",titularidade:"Genérico"},{fabricante:"Abbott",nome:"Cloridrato de sibutramina 15mg, Cápsula (100un)",precoMax:200,precoMin:100,principioAtivo:"Cloridrato de sibutramina 15mg",titularidade:"Referência"}],medTextarea=document.getElementById("getMed"),autocompleteModal=document.querySelector(".get-med__modal"),autocompleteResults=document.querySelector(".get-med__results"),countProduct=[],autocompleteProduct;document.body.addEventListener("click",function(){autocompleteModal.style.display="none"}),medTextarea.onkeyup=function(e){var t=[];if((t=autocomplete(this.value)).length>0&&""!=t){autocompleteResults.innerHTML="";for(var o=0;o<t.length;o++)for(var c=0;c<medicamentos.length;c++){var a=medicamentos[c],i=a.fabricante,r=a.nome,d=a.precoMin.toFixed(2).replace(".",","),n=a.precoMax.toFixed(2).replace(".",","),l=a.principioAtivo,s=a.titularidade;if(t[o]==r){var p="Genérico"==s?'<div class="package__top package__top--generic"></div><div class="package__middle package__middle--generic"><p class="package__generic">G</p></div><div class="package__bottom package__bottom--generic"></div>':'<div class="package__top"></div><div class="package__middle"></div><div class="package__bottom"> </div>',u=d==n?'<p class="price__equal">R$'+d+"</p>":'<p class="price__min">de R$'+d+'</p><p class="price__max">até R$'+n+"</p>";autocompleteResults.innerHTML+='<div class="get-med__product" data-product="'+r+", "+i+'"><div class="product__box product__box--label"><div class="label__package">'+p+'</div></div><div class="product__box product__box--components"><p class="components__name">'+r+'</p><p class="components__composite">'+l+'</p></div><div class="product__box product__box--brand"><p class="brand__med">'+i+'</p><p class="brand__type">'+s+'</p></div><div class="product__box product__box--price">'+u+'<p class="price__sintese">Síntese</p></div></div>'}}medTextarea.addEventListener("input",getCoord),autocompleteProduct=document.querySelectorAll(".get-med__product"),document.querySelector(".load__on").style.display="block",document.querySelector(".load__done").style.display="none",setTimeout(function(){document.querySelector(".load__on").style.display="none",document.querySelector(".load__done").style.display="block",autocompleteProduct[0].classList.add("active"),autocompleteProduct[0].children[3].children.length>0&&(3==autocompleteProduct[0].children[3].children.length?(autocompleteProduct[0].children[3].children[0].style.display="none",autocompleteProduct[0].children[3].children[1].style.display="none",autocompleteProduct[0].children[3].children[2].style.display="block"):(autocompleteProduct[0].children[3].children[0].style.display="none",autocompleteProduct[0].children[3].children[1].style.display="block"))},4e3);for(var m in autocompleteProduct)autocompleteProduct.hasOwnProperty(m)&&(autocompleteProduct[m].addEventListener("click",clickProduct),autocompleteProduct[m].addEventListener("mouseover",function(){autocompleteProduct[0].children[3].children.length>0&&(3==autocompleteProduct[0].children[3].children.length?(autocompleteProduct[0].children[3].children[0].style.display="block",autocompleteProduct[0].children[3].children[1].style.display="block",autocompleteProduct[0].children[3].children[2].style.display="none"):(autocompleteProduct[0].children[3].children[0].style.display="block",autocompleteProduct[0].children[3].children[1].style.display="none")),autocompleteProduct[0].classList.remove("active")}))}else autocompleteModal.style.display="none"},medTextarea.onkeypress=function(e){switch(setTimeout(function(){document.querySelector(".get-med__results").children.length>0&&(autocompleteModal.style.display="block")},1e3),e.which){case 13:document.querySelector(".product__box--icon").classList.add("product__box--search")}};var getCoord=function(e){var t=medTextarea.selectionEnd,o=document.createElement("div"),c=document.createElement("span"),a=getComputedStyle(medTextarea),i={};[].forEach.call(a,function(e){o.style[e]=a[e]}),o.style.position="absolute",document.body.appendChild(o),o.textContent=medTextarea.value.substr(0,t),c.textContent=medTextarea.value.substr(t)||".",o.appendChild(c),i={TOP:c.offsetTop,LEFT:c.offsetLeft},autocompleteModal.style.top=i.TOP+140+"px",document.querySelector(".product__box--icon").style.top=i.TOP+105+"px",autocompleteModal.classList.add("active"),document.body.removeChild(o)},clickProduct=function(e){var t=this.dataset.product;if(-1==countProduct.indexOf(t)){countProduct.push(t+"\n"),medTextarea.value="";var o=countProduct.join("\n");medTextarea.value+=o}getCoord(),document.querySelector(".product__box--icon").classList.remove("product__box--search"),medTextarea.focus(),autocompleteModal.style.display="none",autocompleteResults.innerHTML=""};