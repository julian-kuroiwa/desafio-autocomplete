function hasClass(e,a){return e.className&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(e.className)}function autocomplete(e){var a=[];for(var t in medicamentos)if(medicamentos.hasOwnProperty(t)){var o=medicamentos[t];if(e.search("\n")){var i=e.split("\n");e=i[i.length-1]}e===o.nome.toLowerCase().slice(0,e.length)&&a.push(o.nome)}return a}var medicamentos=[{fabricante:"Roche",nome:"Roacutan 20mg, Cápsula (30un)",precoMax:22.1,precoMin:20.99,principioAtivo:"Isotretinoína 20mg",titularidade:"Referência"},{fabricante:"Sundown Vitaminas",nome:"Vitamina C, comprimido (100un)",precoMax:45.15,precoMin:31.99,principioAtivo:"Ácido Ascórbico",titularidade:"Referência"},{fabricante:"Sundown Vitaminas",nome:"Vitamina C, comprimido (180un)",precoMax:10,precoMin:10,principioAtivo:"Ácido Ascórbico",titularidade:"Genérico"},{fabricante:"EMS Sigma Pharma",nome:"Itraspor 100mg, Cápsula (15un)",precoMax:209,precoMin:100,principioAtivo:"Itraconazol 100mg",titularidade:"Genérico"},{fabricante:"EMS Sigma Pharma",nome:"Itraspor 100mg, Cápsula (28un)",precoMax:15,precoMin:9.99,principioAtivo:"Itraconazol 100mg",titularidade:"Referência"},{fabricante:"Abbott",nome:"Cloridrato de sibutramina 15mg, Cápsula (30un)",precoMax:40,precoMin:40,principioAtivo:"Cloridrato de sibutramina 15mg",titularidade:"Genérico"},{fabricante:"Abbott",nome:"Cloridrato de sibutramina 15mg, Cápsula (100un)",precoMax:200,precoMin:100,principioAtivo:"Cloridrato de sibutramina 15mg",titularidade:"Referência"}],medTextarea=document.getElementById("getMed");medTextarea.onkeyup=function(e){var a=this.value,t=[],o=document.querySelector(".get-med__modal"),i=document.querySelector(".get-med__results");if((t=autocomplete(a)).length>0&&""!=t){i.innerHTML="";for(var c=0;c<t.length;c++)for(var r=0;r<medicamentos.length;r++){var n=medicamentos[r],d=n.fabricante,s=n.nome,p=n.precoMin.toFixed(2).replace(".",","),l=n.precoMax.toFixed(2).replace(".",","),m=n.principioAtivo,u=n.titularidade;if(t[c]==s){var _="Genérico"==u?'<div class="package__top package__top--generic"></div><div class="package__middle package__middle--generic"><p class="package__generic">G</p></div><div class="package__bottom package__bottom--generic"></div>':'<div class="package__top"></div><div class="package__middle"></div><div class="package__bottom"> </div>',v=p==l?'<p class="price__equal">R$'+p+"</p>":'<p class="price__min">de R$'+p+'</p><p class="price__max">até R$'+l+"</p>";i.innerHTML+='<div class="get-med__product" data-product="'+s+", "+d+'"><div class="product__box product__box--label"><div class="label__package">'+_+'</div></div><div class="product__box product__box--components"><p class="components__name">'+s+'</p><p class="components__composite">'+m+'</p></div><div class="product__box product__box--brand"><p class="brand__med">'+d+'</p><p class="brand__type">'+u+'</p></div><div class="product__box product__box--price">'+v+'<p class="price__sintese">Síntese</p></div></div>'}}var b=function(e){var a=medTextarea.selectionEnd,t=document.createElement("div"),i=document.createElement("span"),c=getComputedStyle(medTextarea),r={};[].forEach.call(c,function(e){t.style[e]=c[e]}),t.style.position="absolute",document.body.appendChild(t),t.textContent=medTextarea.value.substr(0,a),i.textContent=medTextarea.value.substr(a)||".",t.appendChild(i),r={TOP:i.offsetTop},o.style.top=r.TOP+140+"px",document.querySelector(".product__box--icon").style.top=r.TOP+105+"px",o.style.display="block",o.classList.add("active"),document.body.removeChild(t)};medTextarea.addEventListener("input",b);var g=document.querySelectorAll(".get-med__product");document.querySelector(".load__on").style.display="block",document.querySelector(".load__done").style.display="none",setTimeout(function(){document.querySelector(".load__on").style.display="none",document.querySelector(".load__done").style.display="block",g[0].classList.add("active")},1e3);for(var x=0;x<g.length;x++)g[x].addEventListener("click",function(e){var a=[],t=this.dataset.product;if(-1==a.indexOf(t)){a.push(t);for(var c=0;c<a.length;c++){var r=a[c]+"\n";medTextarea.value+=r}}b(),document.querySelector(".product__box--icon").classList.remove("product__box--search"),medTextarea.focus(),o.style.display="none",i.innerHTML=""}),g[x].addEventListener("mouseover",function(){g[0].classList.remove("active")})}else o.style.display="none"},medTextarea.onkeypress=function(e){switch(e.which){case 13:document.querySelector(".product__box--icon").classList.add("product__box--search")}};